import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { Platform, NativeModules } from 'react-native';

export const SUPPORTED_LANGUAGES = [
    { code: 'en', label: 'English', native: 'English' },
    { code: 'hi', label: 'Hindi', native: 'हिन्दी' },
    { code: 'ta', label: 'Tamil', native: 'தமிழ்' },
    { code: 'te', label: 'Telugu', native: 'తెలుగు' },
    { code: 'kn', label: 'Kannada', native: 'ಕನ್ನಡ' },
    { code: 'ml', label: 'Malayalam', native: 'മലയാളം' },
    { code: 'mr', label: 'Marathi', native: 'मराठी' },
    { code: 'bn', label: 'Bengali', native: 'বাংলা' },
    { code: 'gu', label: 'Gujarati', native: 'ગુજરાતી' },
];

const resources = {
    en: {
        translation: {
            common: {
                welcome: 'Welcome',
                login: 'Login',
                logout: 'Logout',
                username: 'Username',
                password: 'Password',
                submit: 'Submit',
                cancel: 'Cancel',
                save: 'Save',
                delete: 'Delete',
                edit: 'Edit',
                add: 'Add',
                search: 'Search',
                back: 'Back',
                next: 'Next',
                close: 'Close',
                confirm: 'Confirm',
                yes: 'Yes',
                no: 'No',
                loading: 'Loading...',
                error: 'Error',
                success: 'Success',
                noData: 'No data available',
                language: 'Language',
                settings: 'Settings',
                profile: 'Profile',
                signOut: 'Sign Out',
            },
            dashboard: {
                title: 'Dashboard',
                students: 'Students',
                teachers: 'Teachers',
                attendance: 'Attendance',
                totalStudents: 'Total Students',
                todayAttendance: "Today's Attendance",
                pendingFees: 'Pending Fees',
                recentActivity: 'Recent Activity',
            },
            attendance: {
                title: 'Attendance',
                markAttendance: 'Mark Attendance',
                present: 'Present',
                absent: 'Absent',
                late: 'Late',
                leave: 'On Leave',
                percentage: 'Attendance %',
            },
            students: {
                title: 'Students',
                addStudent: 'Add Student',
                rollNumber: 'Roll Number',
                dateOfBirth: 'Date of Birth',
                fees: 'Fees',
                grades: 'Grades',
            },
            finance: {
                title: 'Finance',
                fees: 'Fees',
                paid: 'Paid',
                unpaid: 'Unpaid',
                dueDate: 'Due Date',
                payNow: 'Pay Now',
            },
            notifications: {
                title: 'Notifications',
                noNotifications: 'No new notifications',
            },
            settings: {
                title: 'Settings',
                language: 'Language & Region',
                notifications: 'Notifications',
                appearance: 'Appearance',
                privacy: 'Privacy',
                about: 'About',
            },
        },
    },
    hi: {
        translation: {
            common: {
                welcome: 'स्वागत है',
                login: 'लॉगिन',
                logout: 'लॉग आउट',
                username: 'उपयोगकर्ता नाम',
                password: 'पासवर्ड',
                submit: 'जमा करें',
                cancel: 'रद्द करें',
                save: 'सहेजें',
                delete: 'हटाएं',
                edit: 'संपादित करें',
                add: 'जोड़ें',
                search: 'खोजें',
                back: 'वापस',
                next: 'अगला',
                close: 'बंद करें',
                confirm: 'पुष्टि करें',
                yes: 'हाँ',
                no: 'नहीं',
                loading: 'लोड हो रहा है...',
                error: 'त्रुटि',
                success: 'सफलता',
                noData: 'कोई डेटा उपलब्ध नहीं',
                language: 'भाषा',
                settings: 'सेटिंग्स',
                profile: 'प्रोफ़ाइल',
                signOut: 'साइन आउट',
            },
            dashboard: {
                title: 'डैशबोर्ड',
                students: 'छात्र',
                teachers: 'शिक्षक',
                attendance: 'उपस्थिति',
                totalStudents: 'कुल छात्र',
                todayAttendance: 'आज की उपस्थिति',
                pendingFees: 'लंबित शुल्क',
                recentActivity: 'हाल की गतिविधि',
            },
            attendance: {
                title: 'उपस्थिति',
                markAttendance: 'उपस्थिति दर्ज करें',
                present: 'उपस्थित',
                absent: 'अनुपस्थित',
                late: 'देर से आए',
                leave: 'छुट्टी पर',
                percentage: 'उपस्थिति %',
            },
            students: {
                title: 'छात्र',
                addStudent: 'छात्र जोड़ें',
                rollNumber: 'रोल नंबर',
                dateOfBirth: 'जन्म तिथि',
                fees: 'शुल्क',
                grades: 'ग्रेड',
            },
            finance: {
                title: 'वित्त',
                fees: 'शुल्क',
                paid: 'भुगतान किया',
                unpaid: 'अवैतनिक',
                dueDate: 'देय तिथि',
                payNow: 'अभी भुगतान करें',
            },
            notifications: {
                title: 'सूचनाएं',
                noNotifications: 'कोई नई सूचना नहीं',
            },
            settings: {
                title: 'सेटिंग्स',
                language: 'भाषा और क्षेत्र',
                notifications: 'सूचनाएं',
                appearance: 'दिखावट',
                privacy: 'गोपनीयता',
                about: 'के बारे में',
            },
        },
    },
    ta: {
        translation: {
            common: {
                welcome: 'வரவேற்கிறோம்',
                login: 'உள்நுழைவு',
                logout: 'வெளியேறு',
                username: 'பயனர் பெயர்',
                password: 'கடவுச்சொல்',
                submit: 'சமர்ப்பி',
                cancel: 'ரத்து செய்',
                save: 'சேமி',
                delete: 'நீக்கு',
                edit: 'திருத்து',
                add: 'சேர்',
                search: 'தேடு',
                back: 'திரும்பு',
                next: 'அடுத்து',
                close: 'மூடு',
                confirm: 'உறுதிப்படுத்து',
                yes: 'ஆம்',
                no: 'இல்லை',
                loading: 'ஏற்றுகிறது...',
                error: 'பிழை',
                success: 'வெற்றி',
                noData: 'தரவு இல்லை',
                language: 'மொழி',
                settings: 'அமைப்புகள்',
                profile: 'சுயவிவரம்',
                signOut: 'வெளியேறு',
            },
            dashboard: {
                title: 'டாஷ்போர்டு',
                students: 'மாணவர்கள்',
                teachers: 'ஆசிரியர்கள்',
                attendance: 'வருகை',
                totalStudents: 'மொத்த மாணவர்கள்',
                todayAttendance: 'இன்றைய வருகை',
                pendingFees: 'நிலுவை கட்டணங்கள்',
                recentActivity: 'சமீபத்திய செயல்பாடு',
            },
            attendance: {
                title: 'வருகை',
                markAttendance: 'வருகை குறி',
                present: 'இருக்கிறார்',
                absent: 'இல்லை',
                late: 'தாமதம்',
                leave: 'விடுப்பில்',
                percentage: 'வருகை %',
            },
            students: {
                title: 'மாணவர்கள்',
                addStudent: 'மாணவர் சேர்',
                rollNumber: 'சுருள் எண்',
                dateOfBirth: 'பிறந்த தேதி',
                fees: 'கட்டணங்கள்',
                grades: 'தரங்கள்',
            },
            finance: {
                title: 'நிதி',
                fees: 'கட்டணங்கள்',
                paid: 'செலுத்தப்பட்டது',
                unpaid: 'செலுத்தப்படவில்லை',
                dueDate: 'கடைசி தேதி',
                payNow: 'இப்போது செலுத்து',
            },
            notifications: {
                title: 'அறிவிப்புகள்',
                noNotifications: 'புதிய அறிவிப்புகள் இல்லை',
            },
            settings: {
                title: 'அமைப்புகள்',
                language: 'மொழி & பிராந்தியம்',
                notifications: 'அறிவிப்புகள்',
                appearance: 'தோற்றம்',
                privacy: 'தனியுரிமை',
                about: 'பற்றி',
            },
        },
    },
    te: {
        translation: {
            common: {
                welcome: 'స్వాగతం',
                login: 'లాగిన్',
                logout: 'లాగ్అవుట్',
                username: 'వినియోగదారు పేరు',
                password: 'పాస్‌వర్డ్',
                submit: 'సమర్పించు',
                cancel: 'రద్దు చేయి',
                save: 'సేవ్ చేయి',
                delete: 'తొలగించు',
                edit: 'సవరించు',
                add: 'చేర్చు',
                search: 'వెతుకు',
                back: 'వెనక్కి',
                next: 'తదుపరి',
                close: 'మూసివేయి',
                confirm: 'నిర్ధారించు',
                yes: 'అవును',
                no: 'కాదు',
                loading: 'లోడ్ అవుతోంది...',
                error: 'లోపం',
                success: 'విజయం',
                noData: 'డేటా అందుబాటులో లేదు',
                language: 'భాష',
                settings: 'సెట్టింగులు',
                profile: 'ప్రొఫైల్',
                signOut: 'సైన్ అవుట్',
            },
            dashboard: {
                title: 'డాష్‌బోర్డ్',
                students: 'విద్యార్థులు',
                teachers: 'ఉపాధ్యాయులు',
                attendance: 'హాజరు',
                totalStudents: 'మొత్తం విద్యార్థులు',
                todayAttendance: 'నేటి హాజరు',
                pendingFees: 'పెండింగ్ ఫీజులు',
                recentActivity: 'ఇటీవలి కార్యకలాపం',
            },
            attendance: {
                title: 'హాజరు',
                markAttendance: 'హాజరు మార్కు చేయి',
                present: 'హాజరు',
                absent: 'గైర్హాజరు',
                late: 'ఆలస్యంగా',
                leave: 'సెలవులో',
                percentage: 'హాజరు %',
            },
            students: {
                title: 'విద్యార్థులు',
                addStudent: 'విద్యార్థిని చేర్చు',
                rollNumber: 'రోల్ నంబర్',
                dateOfBirth: 'పుట్టిన తేదీ',
                fees: 'ఫీజులు',
                grades: 'గ్రేడులు',
            },
            finance: {
                title: 'ఆర్థికం',
                fees: 'ఫీజులు',
                paid: 'చెల్లించబడింది',
                unpaid: 'చెల్లించబడలేదు',
                dueDate: 'గడువు తేదీ',
                payNow: 'ఇప్పుడు చెల్లించు',
            },
            notifications: {
                title: 'నోటిఫికేషన్లు',
                noNotifications: 'కొత్త నోటిఫికేషన్లు లేవు',
            },
            settings: {
                title: 'సెట్టింగులు',
                language: 'భాష & ప్రాంతం',
                notifications: 'నోటిఫికేషన్లు',
                appearance: 'రూపం',
                privacy: 'గోప్యత',
                about: 'గురించి',
            },
        },
    },
    kn: {
        translation: {
            common: {
                welcome: 'ಸ್ವಾಗತ',
                login: 'ಲಾಗಿನ್',
                logout: 'ಲಾಗ್ ಔಟ್',
                username: 'ಬಳಕೆದಾರ ಹೆಸರು',
                password: 'ಪಾಸ್‌ವರ್ಡ್',
                submit: 'ಸಲ್ಲಿಸಿ',
                cancel: 'ರದ್ದು ಮಾಡಿ',
                save: 'ಉಳಿಸಿ',
                delete: 'ಅಳಿಸಿ',
                edit: 'ಸಂಪಾದಿಸಿ',
                add: 'ಸೇರಿಸಿ',
                search: 'ಹುಡುಕಿ',
                back: 'ಹಿಂದೆ',
                next: 'ಮುಂದೆ',
                close: 'ಮುಚ್ಚಿ',
                confirm: 'ದೃಢೀಕರಿಸಿ',
                yes: 'ಹೌದು',
                no: 'ಇಲ್ಲ',
                loading: 'ಲೋಡ್ ಆಗುತ್ತಿದೆ...',
                error: 'ದೋಷ',
                success: 'ಯಶಸ್ಸು',
                noData: 'ಡೇಟಾ ಲಭ್ಯವಿಲ್ಲ',
                language: 'ಭಾಷೆ',
                settings: 'ಸೆಟ್ಟಿಂಗ್‌ಗಳು',
                profile: 'ಪ್ರೊಫೈಲ್',
                signOut: 'ಸೈನ್ ಔಟ್',
            },
            dashboard: {
                title: 'ಡ್ಯಾಶ್‌ಬೋರ್ಡ್',
                students: 'ವಿದ್ಯಾರ್ಥಿಗಳು',
                teachers: 'ಶಿಕ್ಷಕರು',
                attendance: 'ಹಾಜರಾತಿ',
                totalStudents: 'ಒಟ್ಟು ವಿದ್ಯಾರ್ಥಿಗಳು',
                todayAttendance: 'ಇಂದಿನ ಹಾಜರಾತಿ',
                pendingFees: 'ಬಾಕಿ ಶುಲ್ಕಗಳು',
                recentActivity: 'ಇತ್ತೀಚಿನ ಚಟುವಟಿಕೆ',
            },
            attendance: {
                title: 'ಹಾಜರಾತಿ',
                markAttendance: 'ಹಾಜರಾತಿ ಗುರುತಿಸಿ',
                present: 'ಇದ್ದಾರೆ',
                absent: 'ಇಲ್ಲ',
                late: 'ತಡವಾಗಿ',
                leave: 'ರಜೆಯಲ್ಲಿ',
                percentage: 'ಹಾಜರಾತಿ %',
            },
            students: {
                title: 'ವಿದ್ಯಾರ್ಥಿಗಳು',
                addStudent: 'ವಿದ್ಯಾರ್ಥಿ ಸೇರಿಸಿ',
                rollNumber: 'ರೋಲ್ ನಂಬರ್',
                dateOfBirth: 'ಹುಟ್ಟಿದ ದಿನಾಂಕ',
                fees: 'ಶುಲ್ಕಗಳು',
                grades: 'ಶ್ರೇಣಿಗಳು',
            },
            finance: {
                title: 'ಹಣಕಾಸು',
                fees: 'ಶುಲ್ಕಗಳು',
                paid: 'ಪಾವತಿಸಲಾಗಿದೆ',
                unpaid: 'ಪಾವತಿಸಲಾಗಿಲ್ಲ',
                dueDate: 'ಅಂತಿಮ ದಿನಾಂಕ',
                payNow: 'ಈಗ ಪಾವತಿಸಿ',
            },
            notifications: {
                title: 'ಅಧಿಸೂಚನೆಗಳು',
                noNotifications: 'ಹೊಸ ಅಧಿಸೂಚನೆಗಳಿಲ್ಲ',
            },
            settings: {
                title: 'ಸೆಟ್ಟಿಂಗ್‌ಗಳು',
                language: 'ಭಾಷೆ & ಪ್ರದೇಶ',
                notifications: 'ಅಧಿಸೂಚನೆಗಳು',
                appearance: 'ನೋಟ',
                privacy: 'ಗೌಪ್ಯತೆ',
                about: 'ಬಗ್ಗೆ',
            },
        },
    },
    ml: {
        translation: {
            common: {
                welcome: 'സ്വാഗതം',
                login: 'ലോഗിൻ',
                logout: 'ലോഗ് ഔട്ട്',
                username: 'ഉപയോക്തൃ നാമം',
                password: 'പാസ്‌വേഡ്',
                submit: 'സമർപ്പിക്കുക',
                cancel: 'റദ്ദാക്കുക',
                save: 'സംരക്ഷിക്കുക',
                delete: 'ഇല്ലാതാക്കുക',
                edit: 'തിരുത്തുക',
                add: 'ചേർക്കുക',
                search: 'തിരയുക',
                back: 'തിരികെ',
                next: 'അടുത്തത്',
                close: 'അടയ്ക്കുക',
                confirm: 'സ്ഥിരീകരിക്കുക',
                yes: 'അതെ',
                no: 'ഇല്ല',
                loading: 'ലോഡ് ആകുന്നു...',
                error: 'പിഴവ്',
                success: 'വിജയം',
                noData: 'ഡാറ്റ ലഭ്യമല്ല',
                language: 'ഭാഷ',
                settings: 'ക്രമീകരണങ്ങൾ',
                profile: 'പ്രൊഫൈൽ',
                signOut: 'സൈൻ ഔട്ട്',
            },
            dashboard: {
                title: 'ഡാഷ്‌ബോർഡ്',
                students: 'വിദ്യാർത്ഥികൾ',
                teachers: 'അധ്യാപകർ',
                attendance: 'ഹാജർ',
                totalStudents: 'ആകെ വിദ്യാർത്ഥികൾ',
                todayAttendance: 'ഇന്നത്തെ ഹാജർ',
                pendingFees: 'ബാക്കി ഫീസ്',
                recentActivity: 'സമീപകാല പ്രവർത്തനം',
            },
            attendance: {
                title: 'ഹാജർ',
                markAttendance: 'ഹാജർ അടയാളപ്പെടുത്തുക',
                present: 'ഉണ്ട്',
                absent: 'ഇല്ല',
                late: 'വൈകി',
                leave: 'അവധിയിൽ',
                percentage: 'ഹാജർ %',
            },
            students: {
                title: 'വിദ്യാർത്ഥികൾ',
                addStudent: 'വിദ്യാർത്ഥിയെ ചേർക്കുക',
                rollNumber: 'റോൾ നമ്പർ',
                dateOfBirth: 'ജനനതീയതി',
                fees: 'ഫീസ്',
                grades: 'ഗ്രേഡുകൾ',
            },
            finance: {
                title: 'ധനകാര്യം',
                fees: 'ഫീസ്',
                paid: 'അടച്ചു',
                unpaid: 'അടച്ചിട്ടില്ല',
                dueDate: 'അവസാന തീയതി',
                payNow: 'ഇപ്പോൾ അടയ്ക്കുക',
            },
            notifications: {
                title: 'അറിയിപ്പുകൾ',
                noNotifications: 'പുതിയ അറിയിപ്പുകൾ ഇല്ല',
            },
            settings: {
                title: 'ക്രമീകരണങ്ങൾ',
                language: 'ഭാഷ & പ്രദേശം',
                notifications: 'അറിയിപ്പുകൾ',
                appearance: 'രൂപം',
                privacy: 'സ്വകാര്യത',
                about: 'കുറിച്ച്',
            },
        },
    },
    mr: {
        translation: {
            common: {
                welcome: 'स्वागत आहे',
                login: 'लॉगिन',
                logout: 'लॉग आउट',
                username: 'वापरकर्ता नाव',
                password: 'पासवर्ड',
                submit: 'सबमिट करा',
                cancel: 'रद्द करा',
                save: 'जतन करा',
                delete: 'हटवा',
                edit: 'संपादित करा',
                add: 'जोडा',
                search: 'शोधा',
                back: 'मागे',
                next: 'पुढे',
                close: 'बंद करा',
                confirm: 'पुष्टी करा',
                yes: 'होय',
                no: 'नाही',
                loading: 'लोड होत आहे...',
                error: 'त्रुटी',
                success: 'यश',
                noData: 'डेटा उपलब्ध नाही',
                language: 'भाषा',
                settings: 'सेटिंग्ज',
                profile: 'प्रोफाइल',
                signOut: 'साइन आउट',
            },
            dashboard: {
                title: 'डॅशबोर्ड',
                students: 'विद्यार्थी',
                teachers: 'शिक्षक',
                attendance: 'उपस्थिती',
                totalStudents: 'एकूण विद्यार्थी',
                todayAttendance: 'आजची उपस्थिती',
                pendingFees: 'प्रलंबित शुल्क',
                recentActivity: 'अलीकडील क्रियाकलाप',
            },
            attendance: {
                title: 'उपस्थिती',
                markAttendance: 'उपस्थिती नोंदवा',
                present: 'उपस्थित',
                absent: 'अनुपस्थित',
                late: 'उशिरा',
                leave: 'रजेवर',
                percentage: 'उपस्थिती %',
            },
            students: {
                title: 'विद्यार्थी',
                addStudent: 'विद्यार्थी जोडा',
                rollNumber: 'रोल नंबर',
                dateOfBirth: 'जन्म तारीख',
                fees: 'शुल्क',
                grades: 'ग्रेड',
            },
            finance: {
                title: 'वित्त',
                fees: 'शुल्क',
                paid: 'भरले',
                unpaid: 'न भरलेले',
                dueDate: 'देय तारीख',
                payNow: 'आता भरा',
            },
            notifications: {
                title: 'सूचना',
                noNotifications: 'नवीन सूचना नाहीत',
            },
            settings: {
                title: 'सेटिंग्ज',
                language: 'भाषा आणि प्रदेश',
                notifications: 'सूचना',
                appearance: 'स्वरूप',
                privacy: 'गोपनीयता',
                about: 'बद्दल',
            },
        },
    },
    bn: {
        translation: {
            common: {
                welcome: 'স্বাগতম',
                login: 'লগইন',
                logout: 'লগ আউট',
                username: 'ব্যবহারকারীর নাম',
                password: 'পাসওয়ার্ড',
                submit: 'জমা দিন',
                cancel: 'বাতিল করুন',
                save: 'সংরক্ষণ করুন',
                delete: 'মুছুন',
                edit: 'সম্পাদনা করুন',
                add: 'যোগ করুন',
                search: 'অনুসন্ধান করুন',
                back: 'পেছনে',
                next: 'পরবর্তী',
                close: 'বন্ধ করুন',
                confirm: 'নিশ্চিত করুন',
                yes: 'হ্যাঁ',
                no: 'না',
                loading: 'লোড হচ্ছে...',
                error: 'ত্রুটি',
                success: 'সাফল্য',
                noData: 'ডেটা পাওয়া যায়নি',
                language: 'ভাষা',
                settings: 'সেটিংস',
                profile: 'প্রোফাইল',
                signOut: 'সাইন আউট',
            },
            dashboard: {
                title: 'ড্যাশবোর্ড',
                students: 'শিক্ষার্থীরা',
                teachers: 'শিক্ষকরা',
                attendance: 'উপস্থিতি',
                totalStudents: 'মোট শিক্ষার্থী',
                todayAttendance: 'আজকের উপস্থিতি',
                pendingFees: 'বকেয়া ফি',
                recentActivity: 'সাম্প্রতিক কার্যকলাপ',
            },
            attendance: {
                title: 'উপস্থিতি',
                markAttendance: 'উপস্থিতি চিহ্নিত করুন',
                present: 'উপস্থিত',
                absent: 'অনুপস্থিত',
                late: 'দেরিতে',
                leave: 'ছুটিতে',
                percentage: 'উপস্থিতি %',
            },
            students: {
                title: 'শিক্ষার্থীরা',
                addStudent: 'শিক্ষার্থী যোগ করুন',
                rollNumber: 'রোল নম্বর',
                dateOfBirth: 'জন্ম তারিখ',
                fees: 'ফি',
                grades: 'গ্রেড',
            },
            finance: {
                title: 'অর্থায়ন',
                fees: 'ফি',
                paid: 'পরিশোধিত',
                unpaid: 'অপরিশোধিত',
                dueDate: 'নির্ধারিত তারিখ',
                payNow: 'এখনই পরিশোধ করুন',
            },
            notifications: {
                title: 'বিজ্ঞপ্তি',
                noNotifications: 'কোনো নতুন বিজ্ঞপ্তি নেই',
            },
            settings: {
                title: 'সেটিংস',
                language: 'ভাষা এবং অঞ্চল',
                notifications: 'বিজ্ঞপ্তি',
                appearance: 'চেহারা',
                privacy: 'গোপনীয়তা',
                about: 'সম্পর্কে',
            },
        },
    },
    gu: {
        translation: {
            common: {
                welcome: 'સ્વાગત છે',
                login: 'લૉગઇન',
                logout: 'લૉગ આઉટ',
                username: 'વપરાશકર્તા નામ',
                password: 'પાસવર્ડ',
                submit: 'સબમિટ કરો',
                cancel: 'રદ કરો',
                save: 'સાચવો',
                delete: 'કાઢી નાખો',
                edit: 'સંપાદિત કરો',
                add: 'ઉમેરો',
                search: 'શોધો',
                back: 'પાછળ',
                next: 'આગળ',
                close: 'બંધ કરો',
                confirm: 'પુષ્ટિ કરો',
                yes: 'હા',
                no: 'ના',
                loading: 'લોડ થઈ રહ્યું છે...',
                error: 'ભૂલ',
                success: 'સફળતા',
                noData: 'કોઈ ડેટા ઉપલબ્ધ નથી',
                language: 'ભાષા',
                settings: 'સેટિંગ્સ',
                profile: 'પ્રોફાઇલ',
                signOut: 'સાઇન આઉટ',
            },
            dashboard: {
                title: 'ડૅશબોર્ડ',
                students: 'વિદ્યાર્થીઓ',
                teachers: 'શિક્ષકો',
                attendance: 'હાજરી',
                totalStudents: 'કુલ વિદ્યાર્થીઓ',
                todayAttendance: 'આજની હાજરી',
                pendingFees: 'બાકી ફી',
                recentActivity: 'તાજેતરની પ્રવૃત્તિ',
            },
            attendance: {
                title: 'હાજરી',
                markAttendance: 'હાજરી નોંધો',
                present: 'હાજર',
                absent: 'ગેરહાજર',
                late: 'મોડા',
                leave: 'રજા પર',
                percentage: 'હાજરી %',
            },
            students: {
                title: 'વિદ્યાર્થીઓ',
                addStudent: 'વિદ્યાર્થી ઉમેરો',
                rollNumber: 'રોલ નંબર',
                dateOfBirth: 'જન્મ તારીખ',
                fees: 'ફી',
                grades: 'ગ્રેડ',
            },
            finance: {
                title: 'નાણું',
                fees: 'ફી',
                paid: 'ચૂકવ્યું',
                unpaid: 'ન ચૂકવ્યું',
                dueDate: 'છેલ્લી તારીખ',
                payNow: 'હવે ચૂકવો',
            },
            notifications: {
                title: 'સૂચનાઓ',
                noNotifications: 'કોઈ નવી સૂચના નથી',
            },
            settings: {
                title: 'સેટિંગ્સ',
                language: 'ભાષા અને પ્રદેશ',
                notifications: 'સૂચનાઓ',
                appearance: 'દેખાવ',
                privacy: 'ગોપનીયતા',
                about: 'વિશે',
            },
        },
    },
};

export const LANGUAGE_KEY = 'user-language';

const getDeviceLanguage = (): string => {
    try {
        const deviceLanguage =
            Platform.OS === 'ios'
                ? NativeModules.SettingsManager?.settings?.AppleLocale ||
                  NativeModules.SettingsManager?.settings?.AppleLanguages?.[0]
                : NativeModules.I18nManager?.localeIdentifier;

        const code = deviceLanguage ? deviceLanguage.split('_')[0] : 'en';
        // Only return if it's a supported language
        return SUPPORTED_LANGUAGES.some((l) => l.code === code) ? code : 'en';
    } catch {
        return 'en';
    }
};

const languageDetector = {
    type: 'languageDetector' as const,
    async: true,
    detect: async (callback: (lang: string) => void) => {
        try {
            const storedLanguage = await AsyncStorage.getItem(LANGUAGE_KEY);
            if (storedLanguage && SUPPORTED_LANGUAGES.some((l) => l.code === storedLanguage)) {
                return callback(storedLanguage);
            }
            return callback(getDeviceLanguage());
        } catch {
            return callback('en');
        }
    },
    init: () => {},
    cacheUserLanguage: async (language: string) => {
        try {
            await AsyncStorage.setItem(LANGUAGE_KEY, language);
        } catch {
            // silent fail
        }
    },
};

i18n
    // @ts-ignore
    .use(languageDetector)
    .use(initReactI18next)
    .init({
        resources,
        fallbackLng: 'en',
        interpolation: {
            escapeValue: false,
        },
        react: {
            useSuspense: false,
        },
    });

export default i18n;
